name: OVERRIDE-ME

# Replica count for default deployment
replicas: 1

# Max surge for default deployment
maxSurge: 1

# Max unavailable for default deployment
maxUnavailable: 1

deployment:
  enabled: true
  # Default deployment annotations
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/path: "/_metrics"

PodDisruptionBudget:
  enabled: true
  maxUnavailable: 1

HorizontalPodAutoscaler:
  enabled: true
  minReplicas: 1
  maxReplicas: 3
  averageUtilization: 70

# Image for default deployment
image:
  # Example name: registry.domain.tld/project_name/image_name
  name: OVERRIDE-ME
  tag: OVERRIDE-ME
  # Image pull policy, permitted values: Always | IfNotPresent
  pullPolicy: IfNotPresent

terminationGracePeriodSeconds: 30

securityContext:
  runAsUser: 65534
  runAsGroup: 65534
  fsGroup: 65534
  readOnlyRootFilesystem: false

serviceAccount:
  name: default

# OpenBao configuration for secret injection
openbao:
  enabled: false
  annotations: {}
  # Example OpenBao configuration:
  # enabled: true
  # annotations:
  #   vault.hashicorp.com/agent-inject: "true"
  #   vault.hashicorp.com/role: "<TEAMNAME>-team-ro"
  #   vault.hashicorp.com/agent-inject-secret-app: "secret/data/<TEAMNAME>-team/<APPNAME>-app/<SECRETS>"
  #   vault.hashicorp.com/agent-pre-populate: "true"
  #   vault.hashicorp.com/template-static-secret-render-interval: "30s"
  #   vault.hashicorp.com/agent-inject-template-app: |
  #     {{`{{- with secret "secret/data/<TEAMNAME>-team/<APPNAME>-app/<SECRETS>" -}}`}}
  #     {{`{{- range $k, $v := .Data.data -}}`}}
  #     {{`export `}}{{`{{ $k }}`}}{{`="{{ $v }}"`}}
  #     {{`{{ end -}}`}}
  #     {{`{{- end -}}`}}
  # Optional: Command to reload application after secrets update
  #   vault.hashicorp.com/agent-inject-command-app: |
  #     kill -HUP $(pidof nginx)

# Not uses need implement

# podAnnotations: {}

# podLabels: {}

# nodeSelector: {}

# tolerations: []

# affinity: {}

resources:
  limits:
    cpu: 100m
    memory: 56Mi
  requests:
    cpu: 100m
    memory: 56Mi

service:
  # Whether service is enabled or disabled
  enabled: true
  # Type of service, generally don't need to change
  type:
    ClusterIP
    # Service specific annotations
  annotations:
    lido.fi/maintainer: Full name <OVERRIDE-ME@lido.fi>
    prometheus.io/probe: "true"
    prometheus.io/path: /_livenessProbe
  ports:
    - name: http
      port: 8080
      targetPort: 8080
    - name: metrics
      port: 8090
      targetPort: 8090

servicemonitor:
  endpoints:
    - interval: 15s
      path: /metrics
      port: metrics
      scheme: http

pvc:
  enabled: false
# Example pvc
# pvcs:
#   - name: app-shared
#     accessModes:
#       - ReadWriteMany
#     size: 1Gi
#     storageClass: "longhorn-standard"

# Example volume
# volumes:
#   - name: app-shared
#     persistentVolumeClaim:
#       claimName: app-shared
# For rw directories
#   - name: cache
#     emptydir: {}

# Ingress configuration enable if you need to expose the service to the outside world
ingress:
  enabled: false
  ingressClassName: nginx-internal
  rules:
    - host: OVERRIDE-ME  # Replace with your actual host
      paths:
        - path: /
          pathType: Prefix
        - path: /api
          pathType: Prefix
  # TLS configuration uncomment if it necessary
  # tls:
  #   - hosts:
  #       - OVERRIDE-ME  # Replace with your actual host
  #     secretName: OVERRIDE-ME  # Optional: specify if you have TLS certificate

containers:
  - name: container-1
    image:
      name: OVERRIDE-ME
      tag: OVERRIDE-ME
    startupProbe:
      httpGet:
        path: /healthz
        port: 8080
      failureThreshold: 3
      periodSeconds: 3
    livenessProbe:
      httpGet:
        path: /healthz
        port: 8080
        httpHeaders:
      initialDelaySeconds: 3
      periodSeconds: 3
    readinessProbe:
      httpGet:
        path: /healthz
        port: 8080
      initialDelaySeconds: 3
      periodSeconds: 3
    # imagePullPolicy: Always
    # resources:
    #   requests:
    #     cpu: "150m"
    #     memory: "128Mi"
    # volumeMounts:
    #   - name: app-shared
    #     mountPath: /storage/shared
    #   - name: cache
    #     mountPath: /var/cache/nginx
